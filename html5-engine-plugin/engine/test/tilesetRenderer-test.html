<html>
    <head>
        <title>tilesetRenderer-test</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- TODO Replace with minified version when production ready. -->
        <script src="../js/lib/crafty.0.8.0.js"></script>

        <!-- I/O Libraries -->
        <script src="../js/formats/board.js"></script>
        <script src="../js/formats/tileset.js"></script>
        <script src="../js/renderers/tilesetRenderer.js"></script>

        <!-- Import the engine game logic. -->
        <script src="../js/engine.js"></script>
    </head>
    <body>
        <script>
// Init Crafty:
Crafty.init(600, 400);

Crafty.c('Line', {
    ready: true,
    init: function () {
        this.h = 400;
        this.bind("Draw", this.drawLine);
        this.requires("2D, Canvas, Tween");
        this.w = 600;
        Object.defineProperty(this, "toX", {
            get: function () {
                return this._toX;
            },
            set: function (newValue) {
                this._toX = newValue;
                this.trigger("Invalidate");
            }
        });
    },
    drawLine: function (e) {
        var ctx = e.ctx;

        ctx.lineWidth = 2;
        ctx.strokeStyle = "black";

        ctx.beginPath();
        ctx.moveTo(this._fromX, this._lineY);
        ctx.lineTo(this.toX, this._lineY);
        ctx.lineTo(this.toX - 10, this._lineY - 10);
        ctx.moveTo(this.toX, this._lineY);
        ctx.lineTo(this.toX - 10, this._lineY + 10);
        ctx.stroke();
    }
});

Crafty.e("Line")
.attr({x: 10, y: 100, toX: 20, _lineY: 125, _fromX: 20})
.tween({toX: 400}, 500);

Crafty.e('2D, Canvas, Color, Draggable').attr({x: 10, y: 10, w: 50, h: 50}).color('Red');
        </script>
    </body>
</html>
